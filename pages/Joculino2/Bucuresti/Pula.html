<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bucharest Bottle Hunt</title>
    <link rel="stylesheet" href="Pula.css">
</head>
<body>

<!-- Landscape recommendation popup for mobile (always overlays entire screen) -->
<div id="landscape-popup">
    <div class="popup-card">
        <img src="assets/lnd.png" alt="Landscape" />
        <div class="popup-title">Recomandare pentru mobil</div>
        <div class="popup-desc">Pentru o experienÈ›Äƒ mai bunÄƒ, roteÈ™te telefonul Ã®n <b>modul landscape</b>.</div>
        <div class="popup-note">Acest mesaj va dispÄƒrea automat Ã®n modul landscape.</div>
    </div>
</div>
<div id="game-container">
    
    <div id="hud">
        <button class="hud-btn" onclick="openLevelMenu()">â˜° Meniu</button>
        <div>ğŸ“ <span id="level-name">Loading...</span></div>
        <div><span id="score-icon">ğŸ¾</span> <span id="score-text">0/5</span></div>
        <div>ğŸ“ <span id="stick-text">0</span></div>
    </div>

    <div id="scene"></div>

    <div id="notification" style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 20px; opacity: 0; transition: opacity 0.5s; z-index: 50; pointer-events: none;">Notification</div>

    <div id="menu-overlay" class="overlay" style="display: flex;">
        <div id="menu-right-panel">
            <div id="level-grid"></div>
            
            <div class="pagination-controls">
                <button class="big-btn" id="prev-page-btn" onclick="changeMenuPage(-1)" style="display:none;">&lt; Ãnapoi</button>
                <button class="big-btn" id="next-page-btn" onclick="changeMenuPage(1)">Ãnainte &gt;</button>
            </div>

            <button id="reset-btn" class="big-btn" onclick="resetProgress()">âš  Reset Progres</button>
        </div>
    </div>

    <div id="cutscene-overlay" class="overlay" onclick="nextCutsceneFrame()">
        <img id="cutscene-img" src="" alt="Story">
        <div class="cutscene-text">Click pentru a continua...</div>
    </div>

    <div id="win-overlay" class="overlay">
        <h2>LocaÈ›ie CompletÄƒ!</h2>
        <p id="win-msg">Toate sticlele au fost gÄƒsite.</p>
        <button class="big-btn" onclick="nextLevelOrMenu()">ContinuÄƒ</button>
    </div>

</div>

<!-- Sticky note panel (appears next to the game) -->
<div id="sticky-note-panel" class="hidden" aria-hidden="true" role="dialog" aria-label="Sticky note">
    <button id="sticky-close" aria-label="Close sticky note" onclick="hideStickyNote()">âœ–</button>
    <div id="sticky-note-pin" aria-hidden="true"></div>
    <div id="sticky-note-content">
        <h4 id="sticky-note-title">Sticky Note</h4>
        <p id="sticky-note-text">(No text; add the note text to the level item using the `note` property)</p>
    </div>
</div>

<script src="Pula.js"></script>
</body>
<script>
// Show/hide landscape popup based on orientation for mobile devices
function isMobile() {
    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}
function checkOrientationAndTogglePopup() {
    var popup = document.getElementById('landscape-popup');
    if (!popup) return;
    if (isMobile()) {
        // Landscape if width > height
        if (window.innerWidth > window.innerHeight) {
            popup.style.display = 'none';
        } else {
            popup.style.display = 'flex';
        }
    } else {
        popup.style.display = 'none';
    }
}
window.addEventListener('DOMContentLoaded', checkOrientationAndTogglePopup);
window.addEventListener('orientationchange', checkOrientationAndTogglePopup);
window.addEventListener('resize', checkOrientationAndTogglePopup);
</script>
</body>
</html>